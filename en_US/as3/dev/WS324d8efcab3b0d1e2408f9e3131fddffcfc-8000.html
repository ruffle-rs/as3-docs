<?xml version="1.0" encoding="UTF-8"?>
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<!-- saved from url=(0022)http://help.adobe.com/ -->
<!-- saved from url=(0022)http://help.adobe.com/ -->
<html lang="en-us">
 <head>
  <meta content="text/html; charset=utf-8" http-equiv="content-type"/>
  <meta content="en-us" name="lang"/>
  <meta content="livedocs" name="area"/>
  <title>
   Adobe Flash Platform * Using native JSON functionality
  </title>
  <link href="https://help.adobe.com/en_US/as3/dev/images/FlashRuntimeLinkIndicator.png" rel="shortcut icon"/>
  <meta content="ActionScript 3.0 Developer’s Guide" name="book"/>
  <meta content="adobe" name="product"/>
  <meta content="air" name="product"/>
  <meta content="flash" name="product"/>
  <meta content="flex" name="product"/>
  <meta content="" name="keywords"/>
  <!--<PageMap><DataObject type="document"><Attribute name="product" value="adobe"></Attribute><Attribute name="product" value="air"></Attribute><Attribute name="product" value="flash"></Attribute><Attribute name="product" value="flex"></Attribute><Attribute name="book" value="ActionScript 3.0 Developer’s Guide"></Attribute><Attribute name="keywords" value=""></Attribute></DataObject></PageMap>-->
  <script charset="UTF-8" language="Javascript" type="text/javascript">
   <!--[CDATA[
        var currentTreeNode = "WS324d8efcab3b0d1e2408f9e3131fddffcfc-8000.html";
// ]]-->
  </script>
  <script charset="UTF-8" language="Javascript" src="terms.js" type="text/javascript">
   ...
  </script>
  <script charset="UTF-8" language="Javascript" src="help.js" type="text/javascript">
   ...
  </script>
  <script charset="UTF-8" language="Javascript" src="utilities.js" type="text/javascript">
   ...
  </script>
  <script charset="UTF-8" language="Javascript" src="event.js" type="text/javascript">
   ...
  </script>
  <script charset="UTF-8" language="Javascript" src="treeview.js" type="text/javascript">
   ...
  </script>
  <script charset="UTF-8" language="Javascript" src="toc.js" type="text/javascript">
   ..
  </script>
  <script charset="UTF-8" language="Javascript" src="swfobject.js" type="text/javascript">
   ..
  </script>
  <script charset="UTF-8" language="Javascript" src="booklist.js" type="text/javascript">
   ..
  </script>
  <script type="text/javascript">
   <!--[CDATA[
var topictype = "topic";
var headId = document.getElementsByTagName("head")[0];         
if (use_ie_6_behavior) {
  var linkId = document.createElement("link");
  linkId.href = "content-ie6.css";
  linkId.rel = "stylesheet";
  linkId.type = "text/css";
  headId.appendChild(linkId);
}
function initRoboHelpDOM() {
  if (use_chm_behavior) {
    hideElement("search");
  }
  if (use_robohelp_behavior) {
    hideElement("search");
    hideElement("productmenu");
    //hideElement("notyourversion");
  }
  if(!use_chc_behavior) {
    //document.getElementById("notyourversion").style.display = "inline";;
  }
}
var dirname = location.pathname.match( /.*\// );    
function setSearchUserPref(){
  if ( document.cookie.indexOf( "ah_searchpref" ) > -1 ) {
    if ( document.cookie.indexOf( dirname ) > 0 ) {
      document.search.gsa.checked = true ;
    }else{
      document.search.gsa.checked = false ;            
    }
  }
}
YAHOO.util.Event.onDOMReady(initRoboHelpDOM);
YAHOO.util.Event.onDOMReady(setSearchUserPref);
// ]]-->
  </script>
  
<!-- ********************************** -->
<!-- START: ForeSee survey code in: /ssi/globalheader.ssi -->

<script type="text/javascript">
<!-- 
// Enable the survey for only English, German and Japanese
var agt=navigator.userAgent.toLowerCase();
if ( agt.indexOf("community help client") == -1 ){
    if ( document.location.href.indexOf("/en_US/") != -1 ){
        showSurvey();
//    }else if (document.location.href.indexOf("/de_DE/") != -1){
//         var locale="de";
//         showSurvey();
    }else if (document.location.href.indexOf("/ja_JP/") != -1 ){
         var locale="ja";
         showSurvey();
    }	
}

function showSurvey(){
	//document.write('<script type="text/javascript" src="/js/foresee/foresee-trigger.js"><\/scr'+'ipt>');
    // DO NOTHING
}

// -->
</script>

<!-- END: ForeSee survey code -->
<!-- ******************************** -->


  
  
  <link href="tree.css" rel="stylesheet" type="text/css"/>
  <link href="content.css" rel="stylesheet" type="text/css"/>
  <link href="localeSpecific.css" rel="stylesheet" type="text/css"/>
 </head>
 <body id="content_body" onload="window.focus();">
  <a name="top" shape="rect">
   <!--LeaveCommentHere-->
  </a>
  <div id="mnemonic">
   <!--googleoff: index-->
   <div class="FlashRuntime" xmlns:adobe="http://www.adobe.com/saxon">
    <div class="banner">
     <a href="WS9936fa0d5984e93b3f4f38ec1272a447844-8000.html">
      Adobe Flash Platform
     </a>
    </div>
   </div>
   <!--googleon: index-->
  </div>
  <div id="searchbar">
   <table id="searchbartable">
    <tr>
     <td colspan="2">
      <!--googleoff: index-->
      <div xmlns:adobe="http://www.adobe.com/saxon">
       <div id="pdf">
        <img height="16" src="images/PDF.gif" width="16"/>
        <a href="as3_devguide.pdf" title="View Help PDF">
         View Help PDF (
          18M
         B)
        </a>
       </div>
      </div>
      <!--googleon: index-->
     </td>
    </tr>
   </table>
  </div>
  <!-- BEGIN SEARCH CONTENT -->
  <form action="https://help.adobe.com/en_US/as3/dev/search.html" id="search" name="search" target="_self">
   <script type="text/javascript">
    <!--[CDATA[
if ( !use_chc_behavior ){
    if (typeof(terms_AHV_SEARCH_CONSTRAINT) != "undefined" && 
        terms_AHV_SEARCH_CONSTRAINT.length > 0 && 
        document.location.href.indexOf(".adobe.com") > 0){
        if ( typeof(terms_SEARCH_THIS_HELP_ONLY) != "undefined" && terms_SEARCH_THIS_HELP_ONLY == "ON" ) {
            document.write('<div id="searchscope"> \
                <input onchange="setAHSearchPref();" \
                class="gsa" \
                name="gsa" \
                id="gsa" \
                type="checkbox" \
                checked="checked" \
                value="1" ><\/input>'); 
                
        // Leave the "Search this help system only" checkbox unckecked
        }else{    
            document.write('<div id="searchscope"> \
                <input onchange="setAHSearchPref();" \
                class="gsa" \
                name="gsa" \
                id="gsa" \
                type="checkbox" \
                value="1" ><\/input>'); 
        }
        document.write('<span class="gsalabel">' + terms_AHV_SEARCH_CONSTRAINT + '<\/span><\/div>'); 
    }
    document.write('<input class="searchinput" \
        name="q" \
        id="q" \
        type="text" \
        maxlength="256" \
        value="' + terms_AHV_SEARCH_BUTTON + '" \
        onclick="clearSearch()"><\/input><input \
        type="button" \
        name="searchbutton" \
        class="searchbutton" \
        onclick="submit()"><\/input>'); 
} 
 
/* 
 * Start Functions 
 */
function clearSearch(){
    if (document.search.q.value == terms_AHV_SEARCH_BUTTON){document.search.q.value = ""}; 
}

// set search preferences
function setAHSearchPref(){
    if (document.search.gsa.checked == 1){
        setAHSearchCookie( dirname );
    }else{
        setAHSearchCookie( "community" );
    }
}

// Set search preferences cookie
function setAHSearchCookie( p ){
    // set cookie ah_searchpref with a value of the document path
    var expire=new Date();
    expire.setDate(expire.getDate()+365); // Cookie expires after 1 year (365 days) 
}

// ]]-->
   </script>
  </form>
  <!-- END SEARCH CONTENT -->
  <!-- BEGIN PAGE CONTENT WRAPPER -->
  <div id="page_content_wrapper">
   <!-- BEGIN PAGE WRAPPER -->
   <table id="page_content_table">
    <tr>
     
     <td id="col2">
      <!-- BEGIN CONTENT WRAPPER -->
      <!-- BEGIN BREADCRUMBS -->
      <div id="breadcrumb">
       <ul class="navigation">
        <li class="prev">
         <a accesskey="p" class="prev" href="WS5b3ccc516d4fbf351e63e3d118a9b90204-7e69.html" title="XML in ActionScript example: Loading RSS data from the Internet">
          <img alt="Previous" height="17" src="images/blank.gif" width="17"/>
         </a>
        </li>
        <li class="next">
         <a accesskey="n" class="next" href="WS5b3ccc516d4fbf351e63e3d118a9b90204-7fca.html" title="Handling events">
          <img alt="Next" height="17" src="images/blank.gif" width="17"/>
         </a>
        </li>
       </ul>
       <div class="hierarchy" id="hierarchy">
        <a href="WS9936fa0d5984e93b3f4f38ec1272a447844-8000.html">
         <b>
          Home
         </b>
        </a>
        /
        <a href="WS9936fa0d5984e93b3f4f38ec1272a447844-8000.html">
         <b>
          ActionScript 3.0 Developer’s Guide
         </b>
        </a>
        /
        <a href="WSd75bf4610ec9e22f-63e6c4e812214d8b3af-8000.html">
         <b>
          Core ActionScript Classes
         </b>
        </a>
       </div>
      </div>
      <!-- END BREADCRUMBS -->
      <div id="content_wrapper">
       <!-- BEGIN PAGE TITLE -->
       <h1>
        Using native JSON functionality
       </h1>
       <!-- END PAGE TITLE -->
       <!-- BEGIN IONCOMMENTCOUNT -->
       <div id="ionCount">
       </div>
       <!-- END IONCOMMENTCOUNT -->
       <table border="0" cellpadding="0" cellspacing="0" id="inner_content_table" width="100%">
        <tr>
         <td>
          <div style="border-top:#ccc solid 1px;">
           <p>
           </p>
          </div>
          <p id="chcPromo" style="display:none;">
<a id="chcLink" href="http://www.adobe.com/support/chc/">
<img id="chcImage" src="http://www.adobe.com/support/chc/GetMoreHelpFeatures.png"/>
</a>
</p>
<script type="text/javascript" language="javascript" charset="utf-8">
<!--
var cfgArray = [];
//cfgArray["Acrobat_10.0_Professional.helpcfg"] = "acrobatpro";
//cfgArray["Acrobat_10.0_Standard.helpcfg"] = "acrobatstd";
cfgArray["Lightroom_3.0.helpcfg"] = "lightroom";
cfgArray["PhotoshopElements_8.0_Win.helpcfg"] = "photoshopelements";
cfgArray["PhotoshopElements_8.0_Mac.helpcfg"] = "photoshopelementsmac";
cfgArray["PremiereElements_8.0_Win.helpcfg"] = "premiereelements";

//cfgArray["AfterEffects_10.0.helpcfg"] = "aftereffects";
//cfgArray["AIR.helpcfg"] = "air";
//cfgArray["ColdFusionBuilder.helpcfg"] = "coldfusion";
//cfgArray["Contribute_6.0.helpcfg"] = "contribute";
//cfgArray["DeviceCentral_3.0.helpcfg"] = "devicecentral";
//cfgArray["Dreamweaver_11.0.helpcfg"] = "dreamweaver";
//cfgArray["EncoreDVD_5.0.helpcfg"] = "encore";
//cfgArray["ExtensionManager_3.0.helpcfg"] = "extension";
//cfgArray["Fireworks_11.0.helpcfg"] = "fireworks";
//cfgArray["Flash_11.0.helpcfg"] = "flash";
//cfgArray["Flex_4.0.helpcfg"] = "flashbuilder";
//cfgArray["FlashCatalyst_1.0.helpcfg"] = "flashcatalyst";
//cfgArray["Illustrator_15.0.helpcfg"] = "illustrator";
//cfgArray["InCopy_7.0.helpcfg"] = "incopy";
//cfgArray["InDesign_7.0.helpcfg"] = "indesign";
//cfgArray["OnLocation_5.0.helpcfg"] = "onlocation";
//cfgArray["Photoshop_12.0.helpcfg"] = "photoshop";
//cfgArray["PremierePro_5.0.helpcfg"] = "premierepro";

function getLangName() {
    var lang = "en-us";
    var metaElements = document.all ?
            document.all.tags('meta') :
            document.getElementsByTagName ?
            document.getElementsByTagName ('meta') : new Array();
    for (var m = 0; m < metaElements.length; m++) {
        if (metaElements[m].name == "lang") {
            lang = metaElements[m].content;
            break;
        }
    }
    var ptn = /(..)-(..)/;
    if (ptn.test(lang)) {
        var languageCode = lang.replace(ptn, "$1");
        var countryCode = lang.replace(ptn, "$2");
        lang = languageCode + "_" + countryCode.toUpperCase();
    }
    return lang;
}

function getCountryName() {
    var lang = "";
    var metaElements = document.all ?
            document.all.tags('meta') :
            document.getElementsByTagName ?
            document.getElementsByTagName ('meta') : new Array();
    for (var m = 0; m < metaElements.length; m++) {
        if (metaElements[m].name == "lang") {
            lang = metaElements[m].content;
            break;
        }
    }
    var ptn = /(..)-(..)/;
    if ((ptn.test(lang)) && (lang != "en-us")) {
        var countryCode = lang.replace(ptn, "$2");
        return "/" + countryCode;
    }
    return "";
}

if ( (typeof(terms_HELPCFG) != 'undefined')  && (terms_HELPCFG.indexOf(".helpcfg") != -1) ) {
    var stage   = (document.location.href.indexOf(".stage.") != -1) ? 'stage.' : '';
    var baseUrl = 'http://www.' + stage + 'adobe.com';
    var refpage = document.location.href.replace(/#.*$/, '');
	
	if ((!use_robohelp_behavior) && (terms_HELPCFG.length > 0) && (typeof(cfgArray[terms_HELPCFG]) != 'undefined') && (cfgArray[terms_HELPCFG].length > 0)) {
		if (document.getElementById) { // DOM3 = IE5, NS6
			var newHref = baseUrl + getCountryName() + "/support/chc/" + "?helpcfg=http://help." + stage + "adobe.com/HelpCfg/" + getLangName() + "/" + terms_HELPCFG + "&url=" + refpage + "&product=" + cfgArray[terms_HELPCFG];
			var newSrc = baseUrl + getCountryName() + "/support/chc/GetMoreHelpFeatures.png";
			document.getElementById("chcPromo").style.display = "block";
			document.getElementById("chcLink").href = newHref;
			document.getElementById("chcImage").src = newSrc;
		}
	}
}

//-->
</script>


          <div id="minitoc">
           <div class="t">
            <div class="b">
             <div>
              <ul id="minitoc-links">
               <li>
                <p>
                 <a href="#WSf3d65dd2c930a82b-59702cdf13201c7fa84-8000">
                  <span class="topictitle1">
                   Overview of the JSON API
                  </span>
                 </a>
                </p>
                <ul>
                 <li>
                  <p>
                   <a href="#WSf3d65dd2c930a82b-59702cdf13201c7fa84-7ffd">
                    <span class="topictitle2">
                     toJSON() methods
                    </span>
                   </a>
                  </p>
                 </li>
                </ul>
               </li>
               <li>
                <p>
                 <a href="#WSf3d65dd2c930a82b-59702cdf13201c7fa84-7ffc">
                  <span class="topictitle1">
                   Defining custom JSON behavior
                  </span>
                 </a>
                </p>
                <ul>
                 <li>
                  <p>
                   <a href="#WSf3d65dd2c930a82b11338b8013201e2db2b-8000">
                    <span class="topictitle2">
                     Defining toJSON() on the prototype of a built-in class
                    </span>
                   </a>
                  </p>
                 </li>
                 <li>
                  <p>
                   <a href="#WSab2db1cbc17f4fe03862fd0a132e04d0ed0-8000">
                    <span class="topictitle2">
                     Defining or overriding toJSON() at the class level
                    </span>
                   </a>
                  </p>
                 </li>
                 <li>
                  <p>
                   <a href="#WSf3d65dd2c930a82b33ca443913202ba5d0a-8000">
                    <span class="topictitle2">
                     Using the JSON.stringify() replacer parameter
                    </span>
                   </a>
                  </p>
                 </li>
                 <li>
                  <p>
                   <a href="#WSf3d65dd2c930a82b43322d12132a75d91da-8000">
                    <span class="topictitle2">
                     Using the JSON.parse() reviver parameter
                    </span>
                   </a>
                  </p>
                 </li>
                 <li>
                  <p>
                   <a href="#WSde2d341a0d78278f173272d5132ae87b002-8000">
                    <span class="topictitle2">
                     Parsing example
                    </span>
                   </a>
                  </p>
                 </li>
                </ul>
               </li>
              </ul>
             </div>
            </div>
           </div>
          </div>
          <div>
           <p>
            ActionScript 3.0 provides a native API for encoding and
decoding ActionScript objects using JavaScript Object Notation (JSON)
format. The JSON class and supporting member functions follow the
ECMA-262 5th edition specification with few variances.
           </p>
           <p class="byline">
            <img src="images/byline.png"/>
            Community member Todd Anderson provides a comparison
of the native JSON API and the third-party as3corelib JSON class.
See
            <a href="http://blog.infrared5.com/2011/07/working-with-native-json-in-flash-player-11/" target="_self">
             Working with Native JSON in Flash Player
11
            </a>
            .
           </p>
           <ul class="navlinklist">
           </ul>
          </div>
          <div class="nochunk" id="WSf3d65dd2c930a82b-59702cdf13201c7fa84-8000">
           <a name="WSf3d65dd2c930a82b-59702cdf13201c7fa84-8000">
            <!-- -->
           </a>
           <h2 class="topictitle2">
            Overview of the JSON API
           </h2>
           <div>
            <p>
             The ActionScript JSON API consists of the JSON class and
             <samp class="codeph">
              toJSON()
             </samp>
             member functions
on a few native classes. For applications that require a custom
JSON encoding for any class, the ActionScript framework provides
ways to override the default encoding.
            </p>
            <p>
             The JSON class internally handles import and export for any ActionScript
class that does not provide a
             <samp class="codeph">
              toJSON()
             </samp>
             member.
For such cases, JSON traverses the public properties of each object
it encounters. If an object contains other objects, JSON recurses
into the nested objects and performs the same traversal. If any object
provides a
             <samp class="codeph">
              toJSON()
             </samp>
             method, JSON uses that custom
method instead of its internal algorithm.
            </p>
            <p>
             The JSON interface consists of an encoding method,
             <samp class="codeph">
              stringify()
             </samp>
             ,
and a decoding method,
             <samp class="codeph">
              parse()
             </samp>
             . Each of these methods
provides a parameter that lets you insert your own logic into the
JSON encoding or decoding workflow. For
             <samp class="codeph">
              stringify()
             </samp>
             ,
this parameter is named
             <samp class="codeph">
              replacer
             </samp>
             ; for
             <samp class="codeph">
              parse()
             </samp>
             ,
it is
             <samp class="codeph">
              reviver
             </samp>
             . These parameters take a function
definition with two arguments using the following signature:
            </p>
            <pre>function(k, v):*</pre>
           </div>
           <div class="nochunk" id="WSf3d65dd2c930a82b-59702cdf13201c7fa84-7ffd">
            <a name="WSf3d65dd2c930a82b-59702cdf13201c7fa84-7ffd">
             <!-- -->
            </a>
            <h3 class="topictitle3">
             toJSON() methods
            </h3>
            <div>
             <p>
              The signature for
              <samp class="codeph">
               toJSON()
              </samp>
              methods is
             </p>
             <pre>public function toJSON(k:String):*</pre>
             <p>
              <samp class="codeph">
               JSON.stringify()
              </samp>
              calls
              <samp class="codeph">
               toJSON()
              </samp>
              ,
if it exists, for each public property that it encounters during
its traversal of an object. A property consists of a key-value pair.
When
              <samp class="codeph">
               stringify(
              </samp>
              ) calls
              <samp class="codeph">
               toJSON()
              </samp>
              ,
it passes in the key,
              <samp class="codeph">
               k
              </samp>
              , of the property that it
is currently examining. A typical
              <samp class="codeph">
               toJSON()
              </samp>
              implementation evaluates
each property name and returns the desired encoding of its value.
             </p>
             <p>
              The
              <samp class="codeph">
               toJSON()
              </samp>
              method can return a value of any
type (denoted as *)—not just a String. This variable return type
allows
              <samp class="codeph">
               toJSON()
              </samp>
              to return an object if appropriate.
For example, if a property of your custom class contains an object
from another third-party library, you can return that object when
              <samp class="codeph">
               toJSON()
              </samp>
              encounters
your property. JSON then recurses into the third-party object. The encoding
process flow behaves as follows:
             </p>
             <ul>
              <li>
               <p>
                If
                <samp class="codeph">
                 toJSON()
                </samp>
                returns an object that doesn’t
evaluate to a string,
                <samp class="codeph">
                 stringify()
                </samp>
                recurses into
that object.
               </p>
              </li>
              <li>
               <p>
                If
                <samp class="codeph">
                 toJSON()
                </samp>
                returns a string,
                <samp class="codeph">
                 stringify()
                </samp>
                wraps
that value in another string, returns the wrapped string, and then
moves to the next value.
               </p>
              </li>
             </ul>
             <p>
              In many cases, returning an object is preferable to returning
a JSON string created by your application. Returning an object takes
leverages the built-in JSON encoding algorithm and also allows JSON
to recurse into nested objects.
             </p>
             <p>
              The
              <samp class="codeph">
               toJSON()
              </samp>
              method is not defined in the Object
class or in most other native classes. Its absence tells JSON to
perform its standard traversal over the object's public properties.
If you like, you can also use
              <samp class="codeph">
               toJSON()
              </samp>
              to expose
your object’s private properties.
             </p>
             <p>
              A few native classes pose challenges that the ActionScript libraries
can't solve effectively for all use cases. For these classes, ActionScript
provides a trivial implementation that clients can reimplement to
suit their needs. The classes that provide trivial
              <samp class="codeph">
               toJSON()
              </samp>
              members
include:
             </p>
             <ul>
              <li>
               <p>
                ByteArray
               </p>
              </li>
              <li>
               <p>
                Date
               </p>
              </li>
              <li>
               <p>
                Dictionary
               </p>
              </li>
              <li>
               <p>
                XML
               </p>
              </li>
             </ul>
             <p>
              You can subclass the ByteArray class to override its
              <samp class="codeph">
               toJSON()
              </samp>
              method,
or you can redefine its prototype. The Date and XML classes, which
are declared final, require you to use the class prototype to redefine
              <samp class="codeph">
               toJSON()
              </samp>
              .
The Dictionary class is declared dynamic, which gives you extra
freedom in overriding
              <samp class="codeph">
               toJSON()
              </samp>
              .
             </p>
            </div>
           </div>
          </div>
          <div class="nochunk" id="WSf3d65dd2c930a82b-59702cdf13201c7fa84-7ffc">
           <a name="WSf3d65dd2c930a82b-59702cdf13201c7fa84-7ffc">
            <!-- -->
           </a>
           <h2 class="topictitle2">
            Defining custom JSON behavior
           </h2>
           <div>
            <p>
             To implement your own JSON encoding and decoding for native
classes, you can choose from several options:
            </p>
            <ul>
             <li>
              <p>
               Defining or overriding
               <samp class="codeph">
                toJSON()
               </samp>
               on your
custom subclass of a non-final native class
              </p>
             </li>
             <li>
              <p>
               Defining or redefining
               <samp class="codeph">
                toJSON()
               </samp>
               on the class
prototype
              </p>
             </li>
             <li>
              <p>
               Defining a
               <samp class="codeph">
                toJSON
               </samp>
               property on a dynamic
class
              </p>
             </li>
             <li>
              <p>
               Using the
               <samp class="codeph">
                JSON.stringify() replacer
               </samp>
               and
               <samp class="codeph">
                JSON.parser() reviver
               </samp>
               parameters
              </p>
             </li>
            </ul>
           </div>
           <div class="nochunk" id="WSf3d65dd2c930a82b11338b8013201e2db2b-8000">
            <a name="WSf3d65dd2c930a82b11338b8013201e2db2b-8000">
             <!-- -->
            </a>
            <h3 class="topictitle3">
             Defining toJSON() on the prototype of a built-in class
            </h3>
            <div>
             <p>
              The native JSON implementation in ActionScript mirrors
the ECMAScript JSON mechanism defined in ECMA-262, 5th edition.
Since ECMAScript doesn't support classes, ActionScript defines JSON
behavior in terms of prototype-based dispatch. Prototypes are precursors
to ActionScript 3.0 classes that allow simulated inheritance as
well as member additions and redefinitions.
             </p>
             <p>
              ActionScript allows you to define or redefine
              <samp class="codeph">
               toJSON()
              </samp>
              on
the prototype of any class. This privilege applies even to classes
that are marked final. When you define
              <samp class="codeph">
               toJSON()
              </samp>
              on
a class prototype, your definition becomes current for all instances
of that class within the scope of your application. For example,
here's how you can define a
              <samp class="codeph">
               toJSON()
              </samp>
              method on
the MovieClip prototype:
             </p>
             <pre>MovieClip.prototype.toJSON = function(k):* { 
    trace("prototype.toJSON() called."); 
    return "toJSON"; 
} </pre>
             <p>
              When your application then calls
              <samp class="codeph">
               stringify()
              </samp>
              on
any MovieClip instance,
              <samp class="codeph">
               stringify()
              </samp>
              returns the
output of your
              <samp class="codeph">
               toJSON()
              </samp>
              method:
             </p>
             <pre>var mc:MovieClip = new MovieClip(); 
var js:String = JSON.stringify(mc); //"prototype toJSON() called." 
trace("js: " + js); //"js: toJSON"</pre>
             <p>
              You can also override
              <samp class="codeph">
               toJSON()
              </samp>
              in native classes
that define the method. For example, the following code overrides
              <samp class="codeph">
               Date.toJSON()
              </samp>
              :
             </p>
             <pre>Date.prototype.toJSON = function (k):* { 
    return "any date format you like via toJSON: "+ 
        "this.time:"+this.time + " this.hours:"+this.hours; 
} 
var dt:Date = new Date(); 
trace(JSON.stringify(dt)); 
// "any date format you like via toJSON: this.time:1317244361947 this.hours:14" </pre>
            </div>
           </div>
           <div class="nochunk" id="WSab2db1cbc17f4fe03862fd0a132e04d0ed0-8000">
            <a name="WSab2db1cbc17f4fe03862fd0a132e04d0ed0-8000">
             <!-- -->
            </a>
            <h3 class="topictitle3">
             Defining or overriding toJSON() at the class level
            </h3>
            <div>
             <p>
              Applications aren't always required to use prototypes to
redefine
              <samp class="codeph">
               toJSON()
              </samp>
              . You can also define
              <samp class="codeph">
               toJSON()
              </samp>
              as
a member of a subclass if the parent class is not marked final.
For example, you can extend the ByteArray class and define a public
              <samp class="codeph">
               toJSON()
              </samp>
              function:
             </p>
             <pre>package { 
 
    import flash.utils.ByteArray; 
    public class MyByteArray extends ByteArray 
    { 
        public function MyByteArray() { 
        } 
         
        public function toJSON(s:String):* 
        { 
            return "MyByteArray"; 
        } 
 
    } 
} 
 
 
var ba:ByteArray = new ByteArray(); 
trace(JSON.stringify(ba)); //"ByteArray" 
var mba:MyByteArray = new MyByteArray(); //"MyByteArray" 
trace(JSON.stringify(mba)); //"MyByteArray"</pre>
             <p>
              If a class is dynamic, you can add a
              <samp class="codeph">
               toJSON
              </samp>
              property
to an object of that class and assign a function to it as follows:
             </p>
             <div class="para">
              <pre>var d:Dictionary = new Dictionary(); 
trace(JSON.stringify((d))); // "Dictionary" 
d.toJSON = function(){return {c : "toJSON override."};} // overrides existing function 
trace(JSON.stringify((d))); // {"c":"toJSON override."}</pre>
             </div>
             <p>
              You can override, define, or redefine
              <samp class="codeph">
               toJSON()
              </samp>
              on
any ActionScript class. However, most built-in ActionScript classes
don't define
              <samp class="codeph">
               toJSON()
              </samp>
              . The Object class does not
define
              <samp class="codeph">
               toJSON
              </samp>
              in its default prototype or declare
it as a class member. Only a handful of native classes define the
method as a prototype function. Thus, in most classes you can’t
override
              <samp class="codeph">
               toJSON()
              </samp>
              in the traditional sense.
             </p>
             <p>
              Native classes that don’t define
              <samp class="codeph">
               toJSON()
              </samp>
              are
serialized to JSON by the internal JSON implementation. Avoid replacing
this built-in functionality if possible. If you define a
              <samp class="codeph">
               toJSON()
              </samp>
              member,
the JSON class uses your logic instead of its own functionality.
             </p>
            </div>
           </div>
           <div class="nochunk" id="WSf3d65dd2c930a82b33ca443913202ba5d0a-8000">
            <a name="WSf3d65dd2c930a82b33ca443913202ba5d0a-8000">
             <!-- -->
            </a>
            <h3 class="topictitle3">
             Using the JSON.stringify() replacer parameter
            </h3>
            <div>
             <p>
              Overriding
              <samp class="codeph">
               toJSON()
              </samp>
              on the prototype is
useful for changing a class’s JSON export behavior throughout an
application. In some cases, though, your export logic might apply
only to special cases under transient conditions. To accommodate
such small-scope changes, you can use the
              <samp class="codeph">
               replacer
              </samp>
              parameter
of the
              <samp class="codeph">
               JSON.stringify()
              </samp>
              method.
             </p>
             <p>
              The
              <samp class="codeph">
               stringify()
              </samp>
              method applies the function
passed through the
              <samp class="codeph">
               replacer
              </samp>
              parameter to the object
being encoded. The signature for this function is similar to that
of
              <samp class="codeph">
               toJSON()
              </samp>
              :
             </p>
             <pre>function (k,v):* </pre>
             <p>
              Unlike
              <samp class="codeph">
               toJSON()
              </samp>
              , the
              <samp class="codeph">
               replacer
              </samp>
              function
requires the value,
              <samp class="codeph">
               v
              </samp>
              , as well as the key,
              <samp class="codeph">
               k
              </samp>
              .
This difference is necessary because
              <samp class="codeph">
               stringify()
              </samp>
              is
defined on the static JSON object instead of the object being encoded.
When
              <samp class="codeph">
               JSON.stringify()
              </samp>
              calls
              <samp class="codeph">
               replacer(k,v)
              </samp>
              ,
it  is traversing the original input object. The
implicit
              <samp class="codeph">
               this
              </samp>
              parameter passed to the
              <samp class="codeph">
               replacer
              </samp>
              function
refers to the object that holds the key and value. Because
              <samp class="codeph">
               JSON.stringify()
              </samp>
              does
not modify the original input object, that object remains unchanged
in the container being traversed. Thus, you can use the code
              <samp class="codeph">
               this[k]
              </samp>
              to
query the key on the original object. The
              <samp class="codeph">
               v
              </samp>
              parameter
holds the value that
              <samp class="codeph">
               toJSON()
              </samp>
              converts.
             </p>
             <p>
              Like
              <samp class="codeph">
               toJSON()
              </samp>
              , the
              <samp class="codeph">
               replacer
              </samp>
              function
can return any type of value. If
              <samp class="codeph">
               replacer
              </samp>
              returns
a string, the JSON engine escapes the contents in quotes and then
wraps those escaped contents in quotes as well. This wrapping guarantees that
              <samp class="codeph">
               stringify()
              </samp>
              receives
a valid JSON string object that remains a string in a subsequent
call to
              <samp class="codeph">
               JSON.parse()
              </samp>
              .
             </p>
             <p>
              The following code uses the
              <samp class="codeph">
               replacer
              </samp>
              parameter
and the implicit
              <samp class="codeph">
               this
              </samp>
              parameter to return the
              <samp class="codeph">
               time
              </samp>
              and
              <samp class="codeph">
               hours
              </samp>
              values
of a Date object:
             </p>
             <pre>JSON.stringify(d, function (k,v):* { 
    return "any date format you like via replacer: "+ 
        "holder[k].time:"+this[k].time + " holder[k].hours:"+this[k].hours; 
});</pre>
            </div>
           </div>
           <div class="nochunk" id="WSf3d65dd2c930a82b43322d12132a75d91da-8000">
            <a name="WSf3d65dd2c930a82b43322d12132a75d91da-8000">
             <!-- -->
            </a>
            <h3 class="topictitle3">
             Using the JSON.parse() reviver parameter
            </h3>
            <div>
             <p>
              The
              <samp class="codeph">
               reviver
              </samp>
              parameter of the
              <samp class="codeph">
               JSON.parse()
              </samp>
              method
does the opposite of the
              <samp class="codeph">
               replacer
              </samp>
              function: It
converts a JSON string into a usable ActionScript object. The
              <samp class="codeph">
               reviver
              </samp>
              argument
is a function that takes two parameters and returns any type:
             </p>
             <pre>function (k,v):* </pre>
             <p>
              In this function,
              <samp class="codeph">
               k
              </samp>
              is a key, and
              <samp class="codeph">
               v
              </samp>
              is
the value of
              <samp class="codeph">
               k
              </samp>
              . Like
              <samp class="codeph">
               stringify()
              </samp>
              ,
              <samp class="codeph">
               parse()
              </samp>
              traverses
the JSON key-value pairs and applies the
              <samp class="codeph">
               reviver
              </samp>
              function—if
one exists—to each pair. A potential problem is the fact that the
JSON class does not output an object’s ActionScript class name.
Thus, it can be challenging to know which type of object to revive.
This problem can be especially troublesome when objects are nested.
In designing
              <samp class="codeph">
               toJSON()
              </samp>
              ,
              <samp class="codeph">
               replacer
              </samp>
              ,
and
              <samp class="codeph">
               reviver
              </samp>
              functions, you can devise ways to identify
the ActionScript objects that are exported while keeping the original
objects intact.
             </p>
            </div>
           </div>
           <div class="nochunk" id="WSde2d341a0d78278f173272d5132ae87b002-8000">
            <a name="WSde2d341a0d78278f173272d5132ae87b002-8000">
             <!-- -->
            </a>
            <h3 class="topictitle3">
             Parsing example
            </h3>
            <div>
             <p>
              The following example shows a strategy for reviving objects
parsed from JSON strings. This example defines two classes: JSONGenericDictExample
and JSONDictionaryExtnExample. Class JSONGenericDictExample is a
custom dictionary class. Each record contains a person’s name and
birthday, as well as a unique ID. Each time the JSONGenericDictExample
constructor is called, it adds the newly created object to an internal
static array with a statically incrementing integer as its ID. Class
JSONGenericDictExample also defines a
              <samp class="codeph">
               revive()
              </samp>
              method
that extracts just the integer portion from the longer
              <samp class="codeph">
               id
              </samp>
              member.
The
              <samp class="codeph">
               revive()
              </samp>
              method uses this integer to look up
and return the correct revivable object.
             </p>
             <p>
              Class JSONDictionaryExtnExample extends the ActionScript Dictionary
class. Its records have no set structure and can contain any data.
Data is assigned after a JSONDictionaryExtnExample object is constructed,
rather than as class-defined properties. JSONDictionaryExtnExample
records use JSONGenericDictExample objects as keys. When a JSONDictionaryExtnExample
object is revived, the
              <samp class="codeph">
               JSONGenericDictExample.revive()
              </samp>
              function
uses the ID associated with JSONDictionaryExtnExample to retrieve
the correct key object.
             </p>
             <p>
              Most importantly, the
              <samp class="codeph">
               JSONDictionaryExtnExample.toJSON()
              </samp>
              method returns
a marker string in addition to the JSONDictionaryExtnExample object. This
string identifies the JSON output as belonging to the JSONDictionaryExtnExample
class. This marker leaves no doubt as to which object type is being processed
during
              <samp class="codeph">
               JSON.parse()
              </samp>
              .
             </p>
             <pre>package { 
    // Generic dictionary example: 
    public class JSONGenericDictExample { 
        static var revivableObjects = []; 
        static var nextId = 10000; 
        public var id; 
        public var dname:String; 
        public var birthday; 
 
        public function JSONGenericDictExample(name, birthday) { 
            revivableObjects[nextId] = this; 
            this.id       = "id_class_JSONGenericDictExample_" + nextId; 
            this.dname     = name; 
            this.birthday = birthday; 
            nextId++; 
        } 
        public function toString():String { return this.dname; } 
        public static function revive(id:String):JSONGenericDictExample { 
            var r:RegExp = /^id_class_JSONGenericDictExample_([0-9]*)$/; 
            var res = r.exec(id); 
            return JSONGenericDictExample.revivableObjects[res[1]]; 
        } 
    } 
} 
 
package { 
    import flash.utils.Dictionary; 
    import flash.utils.ByteArray; 
 
    // For this extension of dictionary, we serialize the contents of the 
    // dictionary by using toJSON 
    public final class JSONDictionaryExtnExample extends Dictionary { 
        public function toJSON(k):* { 
            var contents = {}; 
            for (var a in this) { 
                contents[a.id] = this[a]; 
            } 
     
            // We also wrap the contents in an object so that we can 
            // identify it by looking for the marking property "class E" 
            // while in the midst of JSON.parse. 
            return {"class JSONDictionaryExtnExample": contents}; 
        } 
 
        // This is just here for debugging and for illustration 
        public function toString():String { 
            var retval = "[JSONDictionaryExtnExample &lt;"; 
            var printed_any = false; 
            for (var k in this) { 
                retval += k.toString() + "=" + 
                "[e="+this[k].earnings + 
                ",v="+this[k].violations + "], " 
                printed_any = true; 
            } 
            if (printed_any) 
                retval = retval.substring(0, retval.length-2); 
            retval += "&gt;]" 
            return retval; 
        } 
    } 
} </pre>
             <p>
              When the following runtime script calls
              <samp class="codeph">
               JSON.parse()
              </samp>
              on
a JSONDictionaryExtnExample object, the
              <samp class="codeph">
               reviver
              </samp>
              function
calls
              <samp class="codeph">
               JSONGenericDictExample.revive()
              </samp>
              on each object
in JSONDictionaryExtnExample. This call extracts the ID that represents
the object key. The
              <samp class="codeph">
               JSONGenericDictExample.revive()
              </samp>
              function
uses this ID to retrieve and return the stored JSONDictionaryExtnExample
object from a private static array.
             </p>
             <pre>import flash.display.MovieClip; 
import flash.text.TextField; 
 
var a_bob1:JSONGenericDictExample = new JSONGenericDictExample("Bob", new Date(Date.parse("01/02/1934"))); 
var a_bob2:JSONGenericDictExample = new JSONGenericDictExample("Bob", new Date(Date.parse("05/06/1978"))); 
var a_jen:JSONGenericDictExample = new JSONGenericDictExample("Jen", new Date(Date.parse("09/09/1999"))); 
 
var e = new JSONDictionaryExtnExample(); 
e[a_bob1] = {earnings: 40, violations: 2}; 
e[a_bob2] = {earnings: 10, violations: 1}; 
e[a_jen]  = {earnings: 25, violations: 3}; 
 
trace("JSON.stringify(e): " + JSON.stringify(e)); // {"class JSONDictionaryExtnExample": 
                        //{"id_class_JSONGenericDictExample_10001": 
                        //{"earnings":10,"violations":1}, 
                        //"id_class_JSONGenericDictExample_10002": 
                        //{"earnings":25,"violations":3}, 
                        //"id_class_JSONGenericDictExample_10000": 
                        // {"earnings":40,"violations":2}}} 
 
var e_result = JSON.stringify(e); 
 
var e1 = new JSONDictionaryExtnExample(); 
var e2 = new JSONDictionaryExtnExample(); 
 
// It's somewhat easy to convert the string from JSON.stringify(e) back 
// into a dictionary (turn it into an object via JSON.parse, then loop 
// over that object's properties to construct a fresh dictionary). 
// 
// The harder exercise is to handle situations where the dictionaries 
// themselves are nested in the object passed to JSON.stringify and 
// thus does not occur at the topmost level of the resulting string. 
// 
// (For example: consider roundtripping something like 
//   var tricky_array = [e1, [[4, e2, 6]], {table:e3}] 
// where e1, e2, e3 are all dictionaries.  Furthermore, consider 
// dictionaries that contain references to dictionaries.) 
// 
// This parsing (or at least some instances of it) can be done via 
// JSON.parse, but it's not necessarily trivial.  Careful consideration 
// of how toJSON, replacer, and reviver can work together is 
// necessary. 
 
var e_roundtrip = 
    JSON.parse(e_result, 
               // This is a reviver that is focused on rebuilding JSONDictionaryExtnExample objects. 
               function (k, v) { 
                    if ("class JSONDictionaryExtnExample" in v) { // special marker tag; 
                        //see JSONDictionaryExtnExample.toJSON(). 
                       var e = new JSONDictionaryExtnExample(); 
                       var contents = v["class JSONDictionaryExtnExample"]; 
                       for (var i in contents) { 
                          // Reviving JSONGenericDictExample objects from string 
                          // identifiers is also special; 
                          // see JSONGenericDictExample constructor and 
                          // JSONGenericDictExample's revive() method. 
                           e[JSONGenericDictExample.revive(i)] = contents[i]; 
                       } 
                       return e; 
                   } else { 
                       return v; 
                   } 
               }); 
 
trace("// == Here is an extended Dictionary that has been round-tripped  =="); 
trace("// == Note that we have revived Jen/Jan during the roundtrip.    =="); 
trace("e:           " + e); //[JSONDictionaryExtnExample &lt;Bob=[e=40,v=2], Bob=[e=10,v=1], 
                           //Jen=[e=25,v=3]&gt;] 
trace("e_roundtrip: " + e_roundtrip); //[JSONDictionaryExtnExample &lt;Bob=[e=40,v=2], 
                                     //Bob=[e=10,v=1], Jen=[e=25,v=3]&gt;] 
trace("Is e_roundtrip a JSONDictionaryExtnExample? " + (e_roundtrip is JSONDictionaryExtnExample)); //true 
trace("Name change: Jen is now Jan"); 
a_jen.dname = "Jan" 
 
trace("e:           " + e); //[JSONDictionaryExtnExample &lt;Bob=[e=40,v=2], Bob=[e=10,v=1], 
                           //Jan=[e=25,v=3]&gt;] 
trace("e_roundtrip: " + e_roundtrip); //[JSONDictionaryExtnExample &lt;Bob=[e=40,v=2], 
                                     //Bob=[e=10,v=1], Jan=[e=25,v=3]&gt;] 
 
 </pre>
            </div>
           </div>
          </div>
          <!-- BEGIN USER PREFERENCES -->
          <div id="userprefs">
          </div>
          <!-- END USER PREFERENCES -->
          <div id="related">
           <div id="relatedlinkinfo">
            More Help topics
           </div>
           <div>
           </div>
           <p xmlns:adobe="http://www.adobe.com/saxon">
            <img class="linkIndicator" src="images/flashplatformLinkIndicator.png"/>
            <a href="../../FlashPlatform/reference/actionscript/3/JSON.html" title="http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/JSON.html">
             JSON
            </a>
           </p>
           <p xmlns:adobe="http://www.adobe.com/saxon">
            <img class="linkIndicator" src="images/as3LinkIndicator.png"/>
            <a href="../learn/WS5b3ccc516d4fbf351e63e3d118a9b90204-7fa3.html" title="http://help.adobe.com/en_US/as3/learn/WS5b3ccc516d4fbf351e63e3d118a9b90204-7fa3.html">
             The prototype object
            </a>
           </p>
           <p xmlns:adobe="http://www.adobe.com/saxon">
            <a href="http://www.ecma-international.org/publications/files/ECMA-ST/Ecma-262.pdf" title="http://www.ecma-international.org/publications/files/ECMA-ST/Ecma-262.pdf">
             ECMA-262, 5th Edition
            </a>
           </p>
           <div class="separator">
            <a href="#top">
             <img src="images/BTT.jpg"/>
            </a>
           </div>
          </div>
          <div id="footer">
           <!-- BEGIN IONCOMMENTS -->
           <div id="ionComHere">
           </div>
           <!-- END IONCOMMENTS -->
           

           <p id="creativecommons">
            <a href="http://creativecommons.org/licenses/by-nc-sa/3.0/" id="creativecommons_text">
             <img alt="This work is licensed under a Creative Commons Attribution-Noncommercial-Share Alike 3.0 Unported License" id="creativecommons_img" src="images/CC.png"/>
            </a>
            Twitter™ and Facebook posts are not covered under the terms of Creative Commons.
           </p>
          </div>
         </td>
         <td width="10px">
         </td>
         <td id="inner_rightcolumn">
          
         </td>
        </tr>
       </table>
      </div>
      <!-- BEGIN BREADCRUMBS -->
      <div id="breadcrumb">
       <ul class="navigation">
        <li class="prev">
         <a accesskey="p" class="prev" href="WS5b3ccc516d4fbf351e63e3d118a9b90204-7e69.html" title="XML in ActionScript example: Loading RSS data from the Internet">
          <img alt="Previous" height="17" src="images/blank.gif" width="17"/>
         </a>
        </li>
        <li class="next">
         <a accesskey="n" class="next" href="WS5b3ccc516d4fbf351e63e3d118a9b90204-7fca.html" title="Handling events">
          <img alt="Next" height="17" src="images/blank.gif" width="17"/>
         </a>
        </li>
       </ul>
       <div class="hierarchy" id="hierarchy">
        <a href="WS9936fa0d5984e93b3f4f38ec1272a447844-8000.html">
         <b>
          Home
         </b>
        </a>
        /
        <a href="WS9936fa0d5984e93b3f4f38ec1272a447844-8000.html">
         <b>
          ActionScript 3.0 Developer’s Guide
         </b>
        </a>
        /
        <a href="WSd75bf4610ec9e22f-63e6c4e812214d8b3af-8000.html">
         <b>
          Core ActionScript Classes
         </b>
        </a>
       </div>
      </div>
      <!-- END BREADCRUMBS -->
      <!-- END CONTENT WRAPPER -->
      
     </td>
     <td id="col3">
      <div>
       <img src="images/adobe-lq.png"/>
      </div>
     </td>
    </tr>
   </table>
  </div>
  <!-- END PAGE CONTENT WRAPPER -->
  <script type="text/javascript">
   <!--[CDATA[
scrollToNameAnchor();
// ]]-->
  </script>
  <!--
    Description:
    This file generates the link to product support in the top right corner
-->

<style>
#menutop{
    position:absolute;
    top:4px;
    right:24px;
    width:auto;    
    font-size:11px;
    color:#fff;
    text-align:right;
}
#menutop a{
    color:#fff;
}
#menutop a:hover{
        text-decoration:underline;
}
</style>  
  
  
  
  
<div id="productmenu">
<!--googleoff: index-->
  <div id="menutop">


<script language=javascript type='text/javascript'>
    // darken menu text for products with light backgrounds
    var path = document.location.href.toLowerCase();
    if (path.indexOf("/acrobat/")           	> 0 ||
        path.indexOf("/acrobat.com/")       	> 0 ||
        path.indexOf("/acrobatConnectPro/") 	> 0 ||
        path.indexOf("/connect/")           	> 0 ||
        path.indexOf("/framemaker/")           	> 0 ||
        path.indexOf("/livecycledataserviceses/") > 0 ||
        path.indexOf("/muse/")         	> 0 ||
		path.indexOf("/presenter/")         	> 0 ||
        path.indexOf("/scene7/")            	> 0 ||
        path.indexOf("/flashmediaserver/")  	> 0 ||
        path.indexOf("/wave/")              	> 0 )
    {
        document.write('<style>#menutop a{color:#505050}</style>');
    }
    if (typeof('terms_AHV_PRODUCT_SUPPORT') != "undefined" && ! use_robohelp_behavior ){      
        if (path.indexOf("/muse/") > -1 ){
            var supportlink = '<a href="http://muse.adobe.com/support.html">'+terms_AHV_PRODUCT_SUPPORT+'</a>';
        }else{
            var supportlink = '<a href="http://adobe.com/support">'+terms_AHV_PRODUCT_SUPPORT+'</a>';
        }
        document.write( supportlink );
     }

</script> 

  </div>
<!--googleon: index-->
</div>



  <style>
#online-privacy-policy{ 
    margin:10px 40px; 
    font-size:11px;
}
</style>

<p id="online-privacy-policy">
<script language="javascript">
var pageLoc = "en_US";
var metaElements = document.all ?
document.all.tags('meta') :
document.getElementsByTagName ?
document.getElementsByTagName ('meta') : new Array();
for (var m = 0; m < metaElements.length; m++) {
	if (metaElements[m].name == "lang") {
		pageLoc = metaElements[m].content;
		break;
	}
}
var ptn = /(..)-(..)/;
if (ptn.test(pageLoc)) {
	var languageCode = pageLoc.replace(ptn, "$1");
	var countryCode = pageLoc.replace(ptn, "$2");
	pageLoc = languageCode + "_" + countryCode.toUpperCase();
}

var policyLoc = "en_US";
var policyText = "Online Privacy Policy";
var policyPath = "";
var policyArray=[
"da_DK", "Online fortrolighedserklæring",
"de_DE", "Online-Datenschutzrichtlinie",
"es_ES", "Política de confidencialidad en línea",
"fi_FI", "Yksityisyyttä koskeva Online-toimintaohjelma",
"fr_FR", "Confidentialité et sécurité",
"it_IT", "Informativa sulla privacy online",
"ja_JP", "プライバシーポリシー",
"ko_KR", "Adobe 온라인 개인정보 보호정책",
"pt_BR", "Política de Confidencialidade On-line", 
"zh_CN", "在线隐私政策",
"zh_TW", "線上隱私政策"
];
var legalLoc = "en_US";
var legalText = "Legal Notices";
var legalPath = legalLoc;
var legalArray=[
"ar_AE", "إشعارات قانونية",
"bg_BG", "Юридически бележки",
"cs_CZ", "Právní upozornění",
"da_DK", "Juridiske meddelelser",
"de_DE", "Rechtliche Hinweise",
"el_GR", "Σημειώσεις νομικού περιεχομένου",
"es_ES", "Avisos legales",
"et_EE", "Juriidilised teated",
"fi_FI", "Lakisääteiset ilmoitukset",
"fr_FR", "Mentions légales",
"he_IL", "הצהרות משפטיות",
"hr_HR", "Pravne napomene",
"hu_HU", "Jogi közlemények",
"it_IT", "Informazioni legali",
"ja_JP", "法律上の注意",
"ko_KR", "법적 고지 사항",
"lt_LT", "Teisinės pastabos",
"lv_LV", "Juridisks paziņojums",
"nb_NO", "Juridiske merknader",
"nl_NL", "Juridische kennisgevingen",
"pl_PL", "Informacje prawne",
"pt_BR", "Aspectos jurídicos",
"ro_RO", "Prevederi legale",
"ru_RU", "Юридическая информация",
"sk_SK", "Právne upozornenie",
"sl_SI", "Pravni pouk",
"sv_SE", "Upphovsrätt",
"tr_TR", "Yasal uyarılar",
"uk_UA", "Юридична інформація",
"zh_CN", "法律声明",
"zh_TW", "法律注意事項"
];

ruPolicy = "http://www.adobe.com/ru/misc/privacy.html";
trPolicy = "http://www.adobe.com/tr/misc/privacy.html";

// Bug 2846992: LOC: RUS, TUR: The link to "Online Privacy Policy" should include language, currently it is not appearing.
if (pageLoc == "ru_RU") {
	policyPath = "ru";
}
else if (pageLoc == "tr_TR") {
	policyPath = "tr";
}
for (var i = 0; i < policyArray.length; i+=2) {
	if (pageLoc == policyArray[i]) {
		policyLoc = pageLoc;
		policyText = policyArray[i+1];
		var ptn = /(..)_(..)/;
		if (ptn.test(policyLoc)) {
			var countryCode = policyLoc.replace(ptn, "$2");
			policyPath = countryCode.toLowerCase();
		}
		break;
	}
}

for (var i = 0; i < legalArray.length; i+=2) {
	if (pageLoc == legalArray[i]) {
		legalLoc = pageLoc;
		legalText = legalArray[i+1];
		legalPath = legalLoc;
		break;
	}
}
if(agt.indexOf("community help client") > -1 ){
	document.write('<a href="/'+legalPath+'/legalnotices/index.html">'+legalText+'<\/a>');
	document.write(' | ');
	document.write('<a href="http://www.adobe.com/'+policyPath+'/misc/privacy.html">'+policyText+'<\/a>');
}else{
	//Open the privacy policy in a new window
	document.write('<a target="_blank" href="/'+legalPath+'/legalnotices/index.html">'+legalText+'<\/a>');
	document.write(' | ');
	document.write('<a target="_blank" href="http://www.adobe.com/'+policyPath+'/misc/privacy.html">'+policyText+'<\/a>');
} 


remove_all_cookies();

function remove_all_cookies() {
	var res = document.cookie;
    var multiple = res.split(";");
    for(var i = 0; i < multiple.length; i++) {
    	var key = multiple[i].split("=");
        document.cookie = key[0]+" =; expires = Thu, 01 Jan 1970 00:00:00 UTC";
    }
}


</script>
</p>


  
<!-- localfooter.ssi -->

<script type="text/javascript">
    var debug = (top.location.href.indexOf("debug=true") > -1);
</script>

<script language="javascript">
document.write('<scr'+'ipt ' +
               'src="/en_US/ssi/_pod.js" ' +
               'language="javascript" ' +
               'charset="UTF-8"> ' +
               '</scr'+'ipt>');
</script>

//  Ethnio survey code removed
  
  
 </body>
</html>