<?xml version="1.0" encoding="UTF-8"?>
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<!-- saved from url=(0022)http://help.adobe.com/ -->
<!-- saved from url=(0022)http://help.adobe.com/ -->
<html lang="en-us">
 <head>
  <meta content="text/html; charset=utf-8" http-equiv="content-type"/>
  <meta content="en-us" name="lang"/>
  <meta content="livedocs" name="area"/>
  <title>
   Adobe Flash Platform * Communicating between workers
  </title>
  <link href="https://help.adobe.com/en_US/as3/dev/images/FlashRuntimeLinkIndicator.png" rel="shortcut icon"/>
  <meta content="ActionScript 3.0 Developer’s Guide" name="book"/>
  <meta content="adobe" name="product"/>
  <meta content="air" name="product"/>
  <meta content="flash" name="product"/>
  <meta content="flex" name="product"/>
  <meta content="" name="keywords"/>
  <!--<PageMap><DataObject type="document"><Attribute name="product" value="adobe"></Attribute><Attribute name="product" value="air"></Attribute><Attribute name="product" value="flash"></Attribute><Attribute name="product" value="flex"></Attribute><Attribute name="book" value="ActionScript 3.0 Developer’s Guide"></Attribute><Attribute name="keywords" value=""></Attribute></DataObject></PageMap>-->
  <script charset="UTF-8" language="Javascript" type="text/javascript">
   <!--[CDATA[
        var currentTreeNode = "WS2f73111e7a180bd0-5856a8af1390d64d08c-7ffe.html";
// ]]-->
  </script>
  <script charset="UTF-8" language="Javascript" src="terms.js" type="text/javascript">
   ...
  </script>
  <script charset="UTF-8" language="Javascript" src="help.js" type="text/javascript">
   ...
  </script>
  <script charset="UTF-8" language="Javascript" src="utilities.js" type="text/javascript">
   ...
  </script>
  <script charset="UTF-8" language="Javascript" src="event.js" type="text/javascript">
   ...
  </script>
  <script charset="UTF-8" language="Javascript" src="treeview.js" type="text/javascript">
   ...
  </script>
  <script charset="UTF-8" language="Javascript" src="toc.js" type="text/javascript">
   ..
  </script>
  <script charset="UTF-8" language="Javascript" src="swfobject.js" type="text/javascript">
   ..
  </script>
  <script charset="UTF-8" language="Javascript" src="booklist.js" type="text/javascript">
   ..
  </script>
  <script type="text/javascript">
   <!--[CDATA[
var topictype = "topic";
var headId = document.getElementsByTagName("head")[0];         
if (use_ie_6_behavior) {
  var linkId = document.createElement("link");
  linkId.href = "content-ie6.css";
  linkId.rel = "stylesheet";
  linkId.type = "text/css";
  headId.appendChild(linkId);
}
function initRoboHelpDOM() {
  if (use_chm_behavior) {
    hideElement("search");
  }
  if (use_robohelp_behavior) {
    hideElement("search");
    hideElement("productmenu");
    //hideElement("notyourversion");
  }
  if(!use_chc_behavior) {
    //document.getElementById("notyourversion").style.display = "inline";;
  }
}
var dirname = location.pathname.match( /.*\// );    
function setSearchUserPref(){
  if ( document.cookie.indexOf( "ah_searchpref" ) > -1 ) {
    if ( document.cookie.indexOf( dirname ) > 0 ) {
      document.search.gsa.checked = true ;
    }else{
      document.search.gsa.checked = false ;            
    }
  }
}
YAHOO.util.Event.onDOMReady(initRoboHelpDOM);
YAHOO.util.Event.onDOMReady(setSearchUserPref);
// ]]-->
  </script>
  
<!-- ********************************** -->
<!-- START: ForeSee survey code in: /ssi/globalheader.ssi -->

<script type="text/javascript">
<!-- 
// Enable the survey for only English, German and Japanese
var agt=navigator.userAgent.toLowerCase();
if ( agt.indexOf("community help client") == -1 ){
    if ( document.location.href.indexOf("/en_US/") != -1 ){
        showSurvey();
//    }else if (document.location.href.indexOf("/de_DE/") != -1){
//         var locale="de";
//         showSurvey();
    }else if (document.location.href.indexOf("/ja_JP/") != -1 ){
         var locale="ja";
         showSurvey();
    }	
}

function showSurvey(){
	//document.write('<script type="text/javascript" src="/js/foresee/foresee-trigger.js"><\/scr'+'ipt>');
    // DO NOTHING
}

// -->
</script>

<!-- END: ForeSee survey code -->
<!-- ******************************** -->


  
  
  <link href="tree.css" rel="stylesheet" type="text/css"/>
  <link href="content.css" rel="stylesheet" type="text/css"/>
  <link href="localeSpecific.css" rel="stylesheet" type="text/css"/>
 </head>
 <body id="content_body" onload="window.focus();">
  <a name="top" shape="rect">
   <!--LeaveCommentHere-->
  </a>
  <div id="mnemonic">
   <!--googleoff: index-->
   <div class="FlashRuntime" xmlns:adobe="http://www.adobe.com/saxon">
    <div class="banner">
     <a href="WS9936fa0d5984e93b3f4f38ec1272a447844-8000.html">
      Adobe Flash Platform
     </a>
    </div>
   </div>
   <!--googleon: index-->
  </div>
  <div id="searchbar">
   <table id="searchbartable">
    <tr>
     <td colspan="2">
      <!--googleoff: index-->
      <div xmlns:adobe="http://www.adobe.com/saxon">
       <div id="pdf">
        <img height="16" src="images/PDF.gif" width="16"/>
        <a href="as3_devguide.pdf" title="View Help PDF">
         View Help PDF (
          18M
         B)
        </a>
       </div>
      </div>
      <!--googleon: index-->
     </td>
    </tr>
   </table>
  </div>
  <!-- BEGIN SEARCH CONTENT -->
  <form action="https://help.adobe.com/en_US/as3/dev/search.html" id="search" name="search" target="_self">
   <script type="text/javascript">
    <!--[CDATA[
if ( !use_chc_behavior ){
    if (typeof(terms_AHV_SEARCH_CONSTRAINT) != "undefined" && 
        terms_AHV_SEARCH_CONSTRAINT.length > 0 && 
        document.location.href.indexOf(".adobe.com") > 0){
        if ( typeof(terms_SEARCH_THIS_HELP_ONLY) != "undefined" && terms_SEARCH_THIS_HELP_ONLY == "ON" ) {
            document.write('<div id="searchscope"> \
                <input onchange="setAHSearchPref();" \
                class="gsa" \
                name="gsa" \
                id="gsa" \
                type="checkbox" \
                checked="checked" \
                value="1" ><\/input>'); 
                
        // Leave the "Search this help system only" checkbox unckecked
        }else{    
            document.write('<div id="searchscope"> \
                <input onchange="setAHSearchPref();" \
                class="gsa" \
                name="gsa" \
                id="gsa" \
                type="checkbox" \
                value="1" ><\/input>'); 
        }
        document.write('<span class="gsalabel">' + terms_AHV_SEARCH_CONSTRAINT + '<\/span><\/div>'); 
    }
    document.write('<input class="searchinput" \
        name="q" \
        id="q" \
        type="text" \
        maxlength="256" \
        value="' + terms_AHV_SEARCH_BUTTON + '" \
        onclick="clearSearch()"><\/input><input \
        type="button" \
        name="searchbutton" \
        class="searchbutton" \
        onclick="submit()"><\/input>'); 
} 
 
/* 
 * Start Functions 
 */
function clearSearch(){
    if (document.search.q.value == terms_AHV_SEARCH_BUTTON){document.search.q.value = ""}; 
}

// set search preferences
function setAHSearchPref(){
    if (document.search.gsa.checked == 1){
        setAHSearchCookie( dirname );
    }else{
        setAHSearchCookie( "community" );
    }
}

// Set search preferences cookie
function setAHSearchCookie( p ){
    // set cookie ah_searchpref with a value of the document path
    var expire=new Date();
    expire.setDate(expire.getDate()+365); // Cookie expires after 1 year (365 days) 
}

// ]]-->
   </script>
  </form>
  <!-- END SEARCH CONTENT -->
  <!-- BEGIN PAGE CONTENT WRAPPER -->
  <div id="page_content_wrapper">
   <!-- BEGIN PAGE WRAPPER -->
   <table id="page_content_table">
    <tr>
     
     <td id="col2">
      <!-- BEGIN CONTENT WRAPPER -->
      <!-- BEGIN BREADCRUMBS -->
      <div id="breadcrumb">
       <ul class="navigation">
        <li class="prev">
         <a accesskey="p" class="prev" href="WS2f73111e7a180bd0-5856a8af1390d64d08c-7fff.html" title="Creating and managing workers">
          <img alt="Previous" height="17" src="images/blank.gif" width="17"/>
         </a>
        </li>
        <li class="next">
         <a accesskey="n" class="next" href="WS5b3ccc516d4fbf351e63e3d118a9b8fa63-8000.html" title="Printing">
          <img alt="Next" height="17" src="images/blank.gif" width="17"/>
         </a>
        </li>
       </ul>
       <div class="hierarchy" id="hierarchy">
        <a href="WS9936fa0d5984e93b3f4f38ec1272a447844-8000.html">
         <b>
          Home
         </b>
        </a>
        /
        <a href="WS9936fa0d5984e93b3f4f38ec1272a447844-8000.html">
         <b>
          ActionScript 3.0 Developer’s Guide
         </b>
        </a>
        /
        <a href="WSd75bf4610ec9e22f-50563ff612214ddf35f-8000.html">
         <b>
          Client system interaction
         </b>
        </a>
        /
        <a href="WS0191790375a6482943a72da3138ec8eec7e-8000.html">
         <b>
          Using workers for concurrency
         </b>
        </a>
       </div>
      </div>
      <!-- END BREADCRUMBS -->
      <div id="content_wrapper">
       <!-- BEGIN PAGE TITLE -->
       <h1>
        Communicating between workers
       </h1>
       <p class="adoberuntime">
        Flash Player 11.4 and later, Adobe AIR 13.4
and later for desktop platforms
       </p>
       <!-- END PAGE TITLE -->
       <!-- BEGIN IONCOMMENTCOUNT -->
       <div id="ionCount">
       </div>
       <!-- END IONCOMMENTCOUNT -->
       <table border="0" cellpadding="0" cellspacing="0" id="inner_content_table" width="100%">
        <tr>
         <td>
          <div style="border-top:#ccc solid 1px;">
           <p>
           </p>
          </div>
          <p id="chcPromo" style="display:none;">
<a id="chcLink" href="http://www.adobe.com/support/chc/">
<img id="chcImage" src="http://www.adobe.com/support/chc/GetMoreHelpFeatures.png"/>
</a>
</p>
<script type="text/javascript" language="javascript" charset="utf-8">
<!--
var cfgArray = [];
//cfgArray["Acrobat_10.0_Professional.helpcfg"] = "acrobatpro";
//cfgArray["Acrobat_10.0_Standard.helpcfg"] = "acrobatstd";
cfgArray["Lightroom_3.0.helpcfg"] = "lightroom";
cfgArray["PhotoshopElements_8.0_Win.helpcfg"] = "photoshopelements";
cfgArray["PhotoshopElements_8.0_Mac.helpcfg"] = "photoshopelementsmac";
cfgArray["PremiereElements_8.0_Win.helpcfg"] = "premiereelements";

//cfgArray["AfterEffects_10.0.helpcfg"] = "aftereffects";
//cfgArray["AIR.helpcfg"] = "air";
//cfgArray["ColdFusionBuilder.helpcfg"] = "coldfusion";
//cfgArray["Contribute_6.0.helpcfg"] = "contribute";
//cfgArray["DeviceCentral_3.0.helpcfg"] = "devicecentral";
//cfgArray["Dreamweaver_11.0.helpcfg"] = "dreamweaver";
//cfgArray["EncoreDVD_5.0.helpcfg"] = "encore";
//cfgArray["ExtensionManager_3.0.helpcfg"] = "extension";
//cfgArray["Fireworks_11.0.helpcfg"] = "fireworks";
//cfgArray["Flash_11.0.helpcfg"] = "flash";
//cfgArray["Flex_4.0.helpcfg"] = "flashbuilder";
//cfgArray["FlashCatalyst_1.0.helpcfg"] = "flashcatalyst";
//cfgArray["Illustrator_15.0.helpcfg"] = "illustrator";
//cfgArray["InCopy_7.0.helpcfg"] = "incopy";
//cfgArray["InDesign_7.0.helpcfg"] = "indesign";
//cfgArray["OnLocation_5.0.helpcfg"] = "onlocation";
//cfgArray["Photoshop_12.0.helpcfg"] = "photoshop";
//cfgArray["PremierePro_5.0.helpcfg"] = "premierepro";

function getLangName() {
    var lang = "en-us";
    var metaElements = document.all ?
            document.all.tags('meta') :
            document.getElementsByTagName ?
            document.getElementsByTagName ('meta') : new Array();
    for (var m = 0; m < metaElements.length; m++) {
        if (metaElements[m].name == "lang") {
            lang = metaElements[m].content;
            break;
        }
    }
    var ptn = /(..)-(..)/;
    if (ptn.test(lang)) {
        var languageCode = lang.replace(ptn, "$1");
        var countryCode = lang.replace(ptn, "$2");
        lang = languageCode + "_" + countryCode.toUpperCase();
    }
    return lang;
}

function getCountryName() {
    var lang = "";
    var metaElements = document.all ?
            document.all.tags('meta') :
            document.getElementsByTagName ?
            document.getElementsByTagName ('meta') : new Array();
    for (var m = 0; m < metaElements.length; m++) {
        if (metaElements[m].name == "lang") {
            lang = metaElements[m].content;
            break;
        }
    }
    var ptn = /(..)-(..)/;
    if ((ptn.test(lang)) && (lang != "en-us")) {
        var countryCode = lang.replace(ptn, "$2");
        return "/" + countryCode;
    }
    return "";
}

if ( (typeof(terms_HELPCFG) != 'undefined')  && (terms_HELPCFG.indexOf(".helpcfg") != -1) ) {
    var stage   = (document.location.href.indexOf(".stage.") != -1) ? 'stage.' : '';
    var baseUrl = 'http://www.' + stage + 'adobe.com';
    var refpage = document.location.href.replace(/#.*$/, '');
	
	if ((!use_robohelp_behavior) && (terms_HELPCFG.length > 0) && (typeof(cfgArray[terms_HELPCFG]) != 'undefined') && (cfgArray[terms_HELPCFG].length > 0)) {
		if (document.getElementById) { // DOM3 = IE5, NS6
			var newHref = baseUrl + getCountryName() + "/support/chc/" + "?helpcfg=http://help." + stage + "adobe.com/HelpCfg/" + getLangName() + "/" + terms_HELPCFG + "&url=" + refpage + "&product=" + cfgArray[terms_HELPCFG];
			var newSrc = baseUrl + getCountryName() + "/support/chc/GetMoreHelpFeatures.png";
			document.getElementById("chcPromo").style.display = "block";
			document.getElementById("chcLink").href = newHref;
			document.getElementById("chcImage").src = newSrc;
		}
	}
}

//-->
</script>


          <div id="minitoc">
           <div class="t">
            <div class="b">
             <div>
              <ul id="minitoc-links">
               <li>
                <p>
                 <a href="#WS2f73111e7a180bd0-c6464a91390e682c24-8000">
                  <span class="topictitle1">
                   Passing data with a shared property
                  </span>
                 </a>
                </p>
               </li>
               <li>
                <p>
                 <a href="#WS2f73111e7a180bd0-c6464a91390e682c24-7fff">
                  <span class="topictitle1">
                   Passing data with a MessageChannel
                  </span>
                 </a>
                </p>
               </li>
               <li>
                <p>
                 <a href="#WS2f73111e7a180bd0-45a72d15139c696689c-8000">
                  <span class="topictitle1">
                   Sharing data using a shareable ByteArray
                  </span>
                 </a>
                </p>
               </li>
               <li>
                <p>
                 <a href="#WS2f73111e7a180bd0d047eb7139123f4689-8000">
                  <span class="topictitle1">
                   Shared references and copied values
                  </span>
                 </a>
                </p>
               </li>
               <li>
                <p>
                 <a href="#WS2f73111e7a180bd0-27c40c781390e65495f-8000">
                  <span class="topictitle1">
                   Additional data-sharing techniques
                  </span>
                 </a>
                </p>
               </li>
              </ul>
             </div>
            </div>
           </div>
          </div>
          <div>
           <p>
            Although workers run their code in separate execution threads,
they wouldn’t offer any benefit if they were completely isolated
from each other. Communication between workers ultimately means
passing data between workers. There are three main mechanisms for
getting data from one worker to another.
           </p>
           <p>
            When deciding which of these data-sharing techniques is appropriate
for a particular data-passing need, consider the two main ways they
differ. One difference between them is with whether there is an
event to notify the receiver that new data is available or whether
the receiving worker must check for updates. Another difference
between these data-sharing techniques has to do with how the data
is actually passed. In some cases the receiving worker gets is a copy
of the shared data, which means that more objects are created taking
more memory and cpu cycles. In other cases the workers access objects
that reference the same underlying system memory, which means fewer
objects are created and less memory is used overall. These differences
are outlined here:
           </p>
           <div class="tablenoborder">
            <table border="1" cellpadding="4" cellspacing="0">
             <thead align="left">
              <tr>
               <th id="d17e61113" valign="top" width="NaN%">
                <p>
                 Communication technique
                </p>
               </th>
               <th id="d17e61116" valign="top" width="NaN%">
                <p>
                 Dispatches event when receiving data
                </p>
               </th>
               <th id="d17e61119" valign="top" width="NaN%">
                <p>
                 Shares memory between workers
                </p>
               </th>
              </tr>
             </thead>
             <tbody>
              <tr>
               <td headers="d17e61113 " valign="top" width="NaN%">
                <p>
                 Worker shared properties
                </p>
               </td>
               <td headers="d17e61116 " valign="top" width="NaN%">
                <p>
                 No
                </p>
               </td>
               <td headers="d17e61119 " valign="top" width="NaN%">
                <p>
                 No, objects are copies not references
                </p>
               </td>
              </tr>
              <tr>
               <td headers="d17e61113 " valign="top" width="NaN%">
                <p>
                 MessageChannel
                </p>
               </td>
               <td headers="d17e61116 " valign="top" width="NaN%">
                <p>
                 Yes
                </p>
               </td>
               <td headers="d17e61119 " valign="top" width="NaN%">
                <p>
                 No, objects are copies not references
                </p>
               </td>
              </tr>
              <tr>
               <td headers="d17e61113 " valign="top" width="NaN%">
                <p>
                 Shareable ByteArray
                </p>
               </td>
               <td headers="d17e61116 " valign="top" width="NaN%">
                <p>
                 No
                </p>
               </td>
               <td headers="d17e61119 " valign="top" width="NaN%">
                <p>
                 Yes, memory is shared
                </p>
               </td>
              </tr>
             </tbody>
            </table>
           </div>
          </div>
          <div class="nochunk" id="WS2f73111e7a180bd0-c6464a91390e682c24-8000">
           <a name="WS2f73111e7a180bd0-c6464a91390e682c24-8000">
            <!-- -->
           </a>
           <h2 class="topictitle2">
            Passing data with a shared property
           </h2>
           <div>
            <p>
             The most basic way to share data between workers is to
use a shared property. Each worker maintains an internal dictionary
of shared property values. The properties are stored with String
key names to distinguish between the properties. To store an object
on a worker as a shared property, call the Worker object’s
             <samp class="codeph">
              setSharedProperty()
             </samp>
             method
with two arguments, the key name and the value to store:
            </p>
            <pre>// code running in the parent worker 
bgWorker.setSharedProperty("sharedPropertyName", someObject);</pre>
            <p>
             Once the shared property has been set, the value can be read
by calling the Worker object’s
             <samp class="codeph">
              getSharedProperty()
             </samp>
             method,
passing in the key name:
            </p>
            <pre>// code running in the background worker 
receivedProperty = Worker.current.getSharedProperty("sharedPropertyName");</pre>
            <p>
             There is no restriction on which worker reads or sets the property
value. For example, code in a background worker can call its
             <samp class="codeph">
              setSharedProperty()
             </samp>
             method
to store a value. Code running in the parent worker can then use
             <samp class="codeph">
              getSharedProperty()
             </samp>
             to
receive the data.
            </p>
            <p>
             The value that’s passed to the
             <samp class="codeph">
              setSharedProperty()
             </samp>
             method
can be almost any type of object. When you call the
             <samp class="codeph">
              getSharedProperty()
             </samp>
             method,
the object that’s returned is a copy of the object passed in to
             <samp class="codeph">
              setSharedProperty()
             </samp>
             and
not a reference to the same object, except in a few special cases.
The specifics of how data is shared are explained in
             <a href="WS2f73111e7a180bd0d047eb7139123f4689-8000.html">
              Shared references and copied values
             </a>
             .
            </p>
            <p>
             The biggest advantage of using a shared property to pass data
between workers is that it’s available even before the worker is
running. You can call a background Worker object’s
             <samp class="codeph">
              setSharedProperty()
             </samp>
             method
to set a shared property even before the worker is running. When
the parent worker calls the Worker’s
             <samp class="codeph">
              start()
             </samp>
             method,
the runtime calls the child worker’s main class’s constructor. Any
shared properties that were set before
             <samp class="codeph">
              start()
             </samp>
             was
called are available for code in the child worker to read.
            </p>
           </div>
          </div>
          <div class="nochunk" id="WS2f73111e7a180bd0-c6464a91390e682c24-7fff">
           <a name="WS2f73111e7a180bd0-c6464a91390e682c24-7fff">
            <!-- -->
           </a>
           <h2 class="topictitle2">
            Passing data with a MessageChannel
           </h2>
           <div>
            <p>
             A message channel provides a one-way data-passing link
between two workers. Using a MessageChannel object to pass data
between workers has one key advantage. When you send a message (an
object) using a message channel, the MessageChannel object dispatches
a
             <samp class="codeph">
              channelMessage
             </samp>
             event. Code in the receiving worker
can listen for that event to know when data is available. That way
the receiving worker doesn’t need to continuously check for data
updates.
            </p>
            <p>
             A message channel is associated with only two workers, a sender
and a receiver. To create a MessageChannel object, call the sending
Worker object’s
             <samp class="codeph">
              createMessageChannel()
             </samp>
             method,
passing the receiving worker as an argument:
            </p>
            <pre>// In the sending worker swf 
var sendChannel:MessageChannel; 
sendChannel = Worker.current.createMessageChannel(receivingWorker);</pre>
            <p>
             Both workers need to have access to the MessageChannel object.
The simplest way to do this is to pass the MessageChannel object
using the
             <samp class="codeph">
              setSharedProperty()
             </samp>
             method:
            </p>
            <pre>receivingWorker.setSharedProperty("incomingChannel", sendChannel);</pre>
            <p>
             In the receiving worker, register a listener for the MessageChannel
object’s
             <samp class="codeph">
              channelMessage
             </samp>
             event. This event is dispatched
when the sending worker sends data through the message channel.
            </p>
            <pre>// In the receiving worker swf 
var incomingChannel:MessageChannel; 
incomingChannel = Worker.current.getSharedProperty("incomingChannel"); 
incomingChannel.addEventListener(Event.CHANNEL_MESSAGE, handleIncomingMessage);</pre>
            <p>
             To actually send data, in the sending worker call the MessageChannel
object’s
             <samp class="codeph">
              send()
             </samp>
             method:
            </p>
            <pre>// In the sending worker swf 
sendChannel.send("This is a message");</pre>
            <p>
             In the receiving worker, the MessageChannel calls the
             <samp class="codeph">
              channelMessage
             </samp>
             event handler.
The receiving worker can then get the data by calling the MessageChannel
object’s
             <samp class="codeph">
              receive()
             </samp>
             method.
            </p>
            <pre>private function handleIncomingMessage(event:Event):void 
{ 
    var message:String = incomingChannel.receive() as String; 
}</pre>
            <p>
             The object returned by the receive method has the same data type
as the object that was passed in to the
             <samp class="codeph">
              send()
             </samp>
             method.
The received object is a copy of the object passed in by the sender
and not a reference to the object in the sending worker, unless
it is one of a few data types, as described in
             <a href="WS2f73111e7a180bd0d047eb7139123f4689-8000.html">
              Shared references and copied values
             </a>
             .
            </p>
           </div>
          </div>
          <div class="nochunk" id="WS2f73111e7a180bd0-45a72d15139c696689c-8000">
           <a name="WS2f73111e7a180bd0-45a72d15139c696689c-8000">
            <!-- -->
           </a>
           <h2 class="topictitle2">
            Sharing data using a shareable ByteArray
           </h2>
           <div>
            <p>
             When an object is passed between two workers, the receiving
worker gets a new object that’s a copy of the original one. The
two objects are stored in different locations in the system’s memory.
Consequently, each copy of the object that’s received increases
the total memory used by the runtime. In addition, any changes that
you make to an object in one worker do not affect the copy in the other
worker. For more details about how data is copied, see
             <a href="WS2f73111e7a180bd0d047eb7139123f4689-8000.html">
              Shared references and copied values
             </a>
             .
            </p>
            <p>
             By default, a ByteArray object uses the same behavior. If you
pass a ByteArray instance to a Worker object’s
             <samp class="codeph">
              setSharedProperty()
             </samp>
             method
or a MessageChannel object’s
             <samp class="codeph">
              send()
             </samp>
             method, the
runtime creates a new ByteArray in the computer’s memory and the
receiving worker gets a ByteArray instance that’s a reference to
that new ByteArray. However, you can change this behavior for a
ByteArray object by setting its
             <samp class="codeph">
              shareable
             </samp>
             property
to
             <samp class="codeph">
              true
             </samp>
             .
            </p>
            <p>
             When a shareable ByteArray object is passed from one worker to
another, the ByteArray instance in the receiving worker is a reference
to the same underlying operating system memory that’s used by the
ByteArray instance in the sending worker. When code in one worker
changes the contents of the byte array, those changes are immediately
available in other workers that have access to that shared byte
array.
            </p>
            <p>
             Because workers execute their code simultaneously, it’s possible
for two workers to attempt to access the same bytes in a byte array
at the same time. This could lead to data loss or corruption. There
are several apis that you can use to manage access to shared resources
and avoid those issues.
            </p>
            <p>
             The ByteArray class has methods that allow you to validate and
change the byte array’s contents in a single operation:
            </p>
            <ul>
             <li>
              <p>
               <a href="../../FlashPlatform/reference/actionscript/3/flash/utils/ByteArray.html#atomicCompareAndSwapIntAt()" target="_self">
                atomicCompareAndSwapIntAt() method
               </a>
              </p>
             </li>
             <li>
              <p>
               <a href="../../FlashPlatform/reference/actionscript/3/flash/utils/ByteArray.html#atomicCompareAndSwapLength()" target="_self">
                atomicCompareAndSwapLength() method
               </a>
              </p>
             </li>
            </ul>
            <p>
             In addition, the flash.concurrent package includes classes that
provide access control for working with shared resources:
            </p>
            <ul>
             <li>
              <p>
               <a href="../../FlashPlatform/reference/actionscript/3/flash/concurrent/Mutex.html" target="_self">
                Mutex class
               </a>
              </p>
             </li>
             <li>
              <p>
               <a href="../../FlashPlatform/reference/actionscript/3/flash/concurrent/Condition.html" target="_self">
                Condition class
               </a>
              </p>
             </li>
            </ul>
           </div>
          </div>
          <div class="nochunk" id="WS2f73111e7a180bd0d047eb7139123f4689-8000">
           <a name="WS2f73111e7a180bd0d047eb7139123f4689-8000">
            <!-- -->
           </a>
           <h2 class="topictitle2">
            Shared references and copied values
           </h2>
           <div>
            <p>
             In the normal case, when you call
             <samp class="codeph">
              Worker.setSharedProperty()
             </samp>
             or
             <samp class="codeph">
              MessageChannel.send()
             </samp>
             ,
the object that’s passed to the receiving worker is passed by serializing
it in AMF format. This has a few consequences:
            </p>
            <ul>
             <li>
              <p>
               The object that’s created in the receiving worker when
it’s
               <samp class="codeph">
                getSharedProperty()
               </samp>
               method is called is deserialized
from the AMF bytes. It is a copy of the original object, not a reference
to the object. Any changes that are made to the object in either
worker are not changed in the copy in the other worker.
              </p>
             </li>
             <li>
              <p>
               Objects that can’t be serialized in AMF format such as display
objects can’t be passed to a worker using
               <samp class="codeph">
                Worker.setSharedProperty()
               </samp>
               or
               <samp class="codeph">
                MessageChannel.send()
               </samp>
               .
              </p>
             </li>
             <li>
              <p>
               In order for a custom class to be deserialized properly,
the class definition must be registered using the
               <samp class="codeph">
                flash.net.registerClassAlias()
               </samp>
               function or
               <samp class="codeph">
                [RemoteClass]
               </samp>
               metadata.
The same alias must be used for both worker's versions of the class.
              </p>
             </li>
            </ul>
            <p>
             There are five special cases of objects that are truly shared
rather than copied between workers:
            </p>
            <ul>
             <li>
              <p>
               Worker objects
              </p>
             </li>
             <li>
              <p>
               MessageChannel objects
              </p>
             </li>
             <li>
              <p>
               shareable byte array (a ByteArray object whose
               <samp class="codeph">
                shareable
               </samp>
               property
is
               <samp class="codeph">
                true
               </samp>
               )
              </p>
             </li>
             <li>
              <p>
               Mutex objects
              </p>
             </li>
             <li>
              <p>
               Condition objects
              </p>
             </li>
            </ul>
            <p>
             When you pass an instance of one of these objects using the
             <samp class="codeph">
              Worker.setSharedProperty()
             </samp>
             method
or
             <samp class="codeph">
              MessageChannel.send()
             </samp>
             method, each worker has
a reference to the same underlying object. Changes made to an instance
in one worker are immediately available in other workers. In addition,
if you pass the same instance of one of these objects to a worker
more than once, the runtime doesn't create a new copy of the object
in the receiving worker. Instead, the same reference is re-used.
            </p>
           </div>
          </div>
          <div class="nochunk" id="WS2f73111e7a180bd0-27c40c781390e65495f-8000">
           <a name="WS2f73111e7a180bd0-27c40c781390e65495f-8000">
            <!-- -->
           </a>
           <h2 class="topictitle2">
            Additional data-sharing techniques
           </h2>
           <div>
            <p>
             In addition to the worker-specific mechanisms for passing
data, workers can also exchange data using any of the existing apis
that support sharing data between two swf applications, such as
the following:
            </p>
            <ul>
             <li>
              <p>
               local shared objects
              </p>
             </li>
             <li>
              <p>
               writing data to a file in one worker and reading from the
file in another worker
              </p>
             </li>
             <li>
              <p>
               storing data to and reading data from a SQLite database
              </p>
             </li>
            </ul>
            <p>
             When you share a resource between two or more workers, you generally
need to avoid having multiple workers accessing the resource at
the same time. For example, having multiple workers access a file
on the local file system could cause data loss or corruption and
may not be supported by the operating system.
            </p>
            <p>
             To guard against concurrent access problems, use the Mutex and
Condition classes in the flash.concurrent package to provide access
control for working with shared resources.
            </p>
            <p>
             Unlike other data-sharing mechanisms, the SQLite database engine
is designed for concurrent access and has its own transaction support
built in. Multiple workers can access a SQLite database without
risk of corrupting the data. Because the workers use different SQLConnection
instances, each worker accesses the database in a separate transaction.
Simultaneous data manipulation operations do not affect the integrity
of the data.
            </p>
            <h4 class="seealsohead">
             See also
            </h4>
            <p>
             <a href="WS5b3ccc516d4fbf351e63e3d118676a5497-7fb4.html">
              Working with local SQL databases in AIR
             </a>
            </p>
            <p>
             <a href="../../FlashPlatform/reference/actionscript/3/flash/concurrent/package-detail.html" target="_self">
              flash.concurrent package
             </a>
            </p>
           </div>
          </div>
          <!-- BEGIN USER PREFERENCES -->
          <div id="userprefs">
          </div>
          <!-- END USER PREFERENCES -->
          <div id="related">
           <div class="separator">
            <a href="#top">
             <img src="images/BTT.jpg"/>
            </a>
           </div>
          </div>
          <div id="footer">
           <!-- BEGIN IONCOMMENTS -->
           <div id="ionComHere">
           </div>
           <!-- END IONCOMMENTS -->
           

           <p id="creativecommons">
            <a href="http://creativecommons.org/licenses/by-nc-sa/3.0/" id="creativecommons_text">
             <img alt="This work is licensed under a Creative Commons Attribution-Noncommercial-Share Alike 3.0 Unported License" id="creativecommons_img" src="images/CC.png"/>
            </a>
            Twitter™ and Facebook posts are not covered under the terms of Creative Commons.
           </p>
          </div>
         </td>
         <td width="10px">
         </td>
         <td id="inner_rightcolumn">
          
         </td>
        </tr>
       </table>
      </div>
      <!-- BEGIN BREADCRUMBS -->
      <div id="breadcrumb">
       <ul class="navigation">
        <li class="prev">
         <a accesskey="p" class="prev" href="WS2f73111e7a180bd0-5856a8af1390d64d08c-7fff.html" title="Creating and managing workers">
          <img alt="Previous" height="17" src="images/blank.gif" width="17"/>
         </a>
        </li>
        <li class="next">
         <a accesskey="n" class="next" href="WS5b3ccc516d4fbf351e63e3d118a9b8fa63-8000.html" title="Printing">
          <img alt="Next" height="17" src="images/blank.gif" width="17"/>
         </a>
        </li>
       </ul>
       <div class="hierarchy" id="hierarchy">
        <a href="WS9936fa0d5984e93b3f4f38ec1272a447844-8000.html">
         <b>
          Home
         </b>
        </a>
        /
        <a href="WS9936fa0d5984e93b3f4f38ec1272a447844-8000.html">
         <b>
          ActionScript 3.0 Developer’s Guide
         </b>
        </a>
        /
        <a href="WSd75bf4610ec9e22f-50563ff612214ddf35f-8000.html">
         <b>
          Client system interaction
         </b>
        </a>
        /
        <a href="WS0191790375a6482943a72da3138ec8eec7e-8000.html">
         <b>
          Using workers for concurrency
         </b>
        </a>
       </div>
      </div>
      <!-- END BREADCRUMBS -->
      <!-- END CONTENT WRAPPER -->
      
     </td>
     <td id="col3">
      <div>
       <img src="images/adobe-lq.png"/>
      </div>
     </td>
    </tr>
   </table>
  </div>
  <!-- END PAGE CONTENT WRAPPER -->
  <script type="text/javascript">
   <!--[CDATA[
scrollToNameAnchor();
// ]]-->
  </script>
  <!--
    Description:
    This file generates the link to product support in the top right corner
-->

<style>
#menutop{
    position:absolute;
    top:4px;
    right:24px;
    width:auto;    
    font-size:11px;
    color:#fff;
    text-align:right;
}
#menutop a{
    color:#fff;
}
#menutop a:hover{
        text-decoration:underline;
}
</style>  
  
  
  
  
<div id="productmenu">
<!--googleoff: index-->
  <div id="menutop">


<script language=javascript type='text/javascript'>
    // darken menu text for products with light backgrounds
    var path = document.location.href.toLowerCase();
    if (path.indexOf("/acrobat/")           	> 0 ||
        path.indexOf("/acrobat.com/")       	> 0 ||
        path.indexOf("/acrobatConnectPro/") 	> 0 ||
        path.indexOf("/connect/")           	> 0 ||
        path.indexOf("/framemaker/")           	> 0 ||
        path.indexOf("/livecycledataserviceses/") > 0 ||
        path.indexOf("/muse/")         	> 0 ||
		path.indexOf("/presenter/")         	> 0 ||
        path.indexOf("/scene7/")            	> 0 ||
        path.indexOf("/flashmediaserver/")  	> 0 ||
        path.indexOf("/wave/")              	> 0 )
    {
        document.write('<style>#menutop a{color:#505050}</style>');
    }
    if (typeof('terms_AHV_PRODUCT_SUPPORT') != "undefined" && ! use_robohelp_behavior ){      
        if (path.indexOf("/muse/") > -1 ){
            var supportlink = '<a href="http://muse.adobe.com/support.html">'+terms_AHV_PRODUCT_SUPPORT+'</a>';
        }else{
            var supportlink = '<a href="http://adobe.com/support">'+terms_AHV_PRODUCT_SUPPORT+'</a>';
        }
        document.write( supportlink );
     }

</script> 

  </div>
<!--googleon: index-->
</div>



  <style>
#online-privacy-policy{ 
    margin:10px 40px; 
    font-size:11px;
}
</style>

<p id="online-privacy-policy">
<script language="javascript">
var pageLoc = "en_US";
var metaElements = document.all ?
document.all.tags('meta') :
document.getElementsByTagName ?
document.getElementsByTagName ('meta') : new Array();
for (var m = 0; m < metaElements.length; m++) {
	if (metaElements[m].name == "lang") {
		pageLoc = metaElements[m].content;
		break;
	}
}
var ptn = /(..)-(..)/;
if (ptn.test(pageLoc)) {
	var languageCode = pageLoc.replace(ptn, "$1");
	var countryCode = pageLoc.replace(ptn, "$2");
	pageLoc = languageCode + "_" + countryCode.toUpperCase();
}

var policyLoc = "en_US";
var policyText = "Online Privacy Policy";
var policyPath = "";
var policyArray=[
"da_DK", "Online fortrolighedserklæring",
"de_DE", "Online-Datenschutzrichtlinie",
"es_ES", "Política de confidencialidad en línea",
"fi_FI", "Yksityisyyttä koskeva Online-toimintaohjelma",
"fr_FR", "Confidentialité et sécurité",
"it_IT", "Informativa sulla privacy online",
"ja_JP", "プライバシーポリシー",
"ko_KR", "Adobe 온라인 개인정보 보호정책",
"pt_BR", "Política de Confidencialidade On-line", 
"zh_CN", "在线隐私政策",
"zh_TW", "線上隱私政策"
];
var legalLoc = "en_US";
var legalText = "Legal Notices";
var legalPath = legalLoc;
var legalArray=[
"ar_AE", "إشعارات قانونية",
"bg_BG", "Юридически бележки",
"cs_CZ", "Právní upozornění",
"da_DK", "Juridiske meddelelser",
"de_DE", "Rechtliche Hinweise",
"el_GR", "Σημειώσεις νομικού περιεχομένου",
"es_ES", "Avisos legales",
"et_EE", "Juriidilised teated",
"fi_FI", "Lakisääteiset ilmoitukset",
"fr_FR", "Mentions légales",
"he_IL", "הצהרות משפטיות",
"hr_HR", "Pravne napomene",
"hu_HU", "Jogi közlemények",
"it_IT", "Informazioni legali",
"ja_JP", "法律上の注意",
"ko_KR", "법적 고지 사항",
"lt_LT", "Teisinės pastabos",
"lv_LV", "Juridisks paziņojums",
"nb_NO", "Juridiske merknader",
"nl_NL", "Juridische kennisgevingen",
"pl_PL", "Informacje prawne",
"pt_BR", "Aspectos jurídicos",
"ro_RO", "Prevederi legale",
"ru_RU", "Юридическая информация",
"sk_SK", "Právne upozornenie",
"sl_SI", "Pravni pouk",
"sv_SE", "Upphovsrätt",
"tr_TR", "Yasal uyarılar",
"uk_UA", "Юридична інформація",
"zh_CN", "法律声明",
"zh_TW", "法律注意事項"
];

ruPolicy = "http://www.adobe.com/ru/misc/privacy.html";
trPolicy = "http://www.adobe.com/tr/misc/privacy.html";

// Bug 2846992: LOC: RUS, TUR: The link to "Online Privacy Policy" should include language, currently it is not appearing.
if (pageLoc == "ru_RU") {
	policyPath = "ru";
}
else if (pageLoc == "tr_TR") {
	policyPath = "tr";
}
for (var i = 0; i < policyArray.length; i+=2) {
	if (pageLoc == policyArray[i]) {
		policyLoc = pageLoc;
		policyText = policyArray[i+1];
		var ptn = /(..)_(..)/;
		if (ptn.test(policyLoc)) {
			var countryCode = policyLoc.replace(ptn, "$2");
			policyPath = countryCode.toLowerCase();
		}
		break;
	}
}

for (var i = 0; i < legalArray.length; i+=2) {
	if (pageLoc == legalArray[i]) {
		legalLoc = pageLoc;
		legalText = legalArray[i+1];
		legalPath = legalLoc;
		break;
	}
}
if(agt.indexOf("community help client") > -1 ){
	document.write('<a href="/'+legalPath+'/legalnotices/index.html">'+legalText+'<\/a>');
	document.write(' | ');
	document.write('<a href="http://www.adobe.com/'+policyPath+'/misc/privacy.html">'+policyText+'<\/a>');
}else{
	//Open the privacy policy in a new window
	document.write('<a target="_blank" href="/'+legalPath+'/legalnotices/index.html">'+legalText+'<\/a>');
	document.write(' | ');
	document.write('<a target="_blank" href="http://www.adobe.com/'+policyPath+'/misc/privacy.html">'+policyText+'<\/a>');
} 


remove_all_cookies();

function remove_all_cookies() {
	var res = document.cookie;
    var multiple = res.split(";");
    for(var i = 0; i < multiple.length; i++) {
    	var key = multiple[i].split("=");
        document.cookie = key[0]+" =; expires = Thu, 01 Jan 1970 00:00:00 UTC";
    }
}


</script>
</p>


  
<!-- localfooter.ssi -->

<script type="text/javascript">
    var debug = (top.location.href.indexOf("debug=true") > -1);
</script>

<script language="javascript">
document.write('<scr'+'ipt ' +
               'src="/en_US/ssi/_pod.js" ' +
               'language="javascript" ' +
               'charset="UTF-8"> ' +
               '</scr'+'ipt>');
</script>

//  Ethnio survey code removed
  
  
 </body>
</html>